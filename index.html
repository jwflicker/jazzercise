<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<title>Web Melody</title>
</head>
<body>
	<script src="./melody.js"></script>
	<script>
	var midiAccess = null;  // global MIDIAccess object

	function onMIDISuccess( midiAccess ) {
	  console.log( "MIDI ready!" );
	  midi = midiAccess;  // store in the global (in real usage, would probably keep in an object instance)
	  var melody1 = new melody(1000);
	  melody1.add(new melody1.note(0, 1, 60, 0x7f));
	  melody1.add(new melody1.note(0, 1, 60, 0x7f));
	  melody1.add(new melody1.note(0, 2/3, 60, 0x7f));
	  melody1.add(new melody1.note(0, 1/3, 62, 0x7f));
	  melody1.add(new melody1.note(0, 1, 64, 0x7f));
	  
	  melody1.add(new melody1.note(0, 2/3, 64, 0x7f));
	  melody1.add(new melody1.note(0, 1/3, 62, 0x7f));
	  melody1.add(new melody1.note(0, 2/3, 64, 0x7f));
	  melody1.add(new melody1.note(0, 1/3, 65, 0x7f));
	  melody1.add(new melody1.note(0, 2, 67, 0x7f));
	  
	  melody1.add(new melody1.note(0, 1/3, 72, 0x7f));
	  melody1.add(new melody1.note(0, 1/3, 72, 0x7f));
	  melody1.add(new melody1.note(0, 1/3, 72, 0x7f));
	  melody1.add(new melody1.note(0, 1/3, 67, 0x7f));
	  melody1.add(new melody1.note(0, 1/3, 67, 0x7f));
	  melody1.add(new melody1.note(0, 1/3, 67, 0x7f));
	  melody1.add(new melody1.note(0, 1/3, 64, 0x7f));
	  melody1.add(new melody1.note(0, 1/3, 64, 0x7f));
	  melody1.add(new melody1.note(0, 1/3, 64, 0x7f));
	  melody1.add(new melody1.note(0, 1/3, 60, 0x7f));
	  melody1.add(new melody1.note(0, 1/3, 60, 0x7f));
	  melody1.add(new melody1.note(0, 1/3, 60, 0x7f));
	  
	  melody1.add(new melody1.note(0, 2/3, 67, 0x7f));
	  melody1.add(new melody1.note(0, 1/3, 65, 0x7f));
	  melody1.add(new melody1.note(0, 2/3, 64, 0x7f));
	  melody1.add(new melody1.note(0, 1/3, 62, 0x7f));
	  melody1.add(new melody1.note(0, 2, 60, 0x7f));
	  
	  var output = midi.outputs.get(0);
	  melody1.play(output, 0);
	  
	  melody1.play(output, 4);
	  
	  melody1.play(output, 8);
	  
	  //melody1.transcribe(7).play(output, 0);
	  //melody1.transform(2000).play(output, 0);	    
	                                                                      //
	}

	function onMIDIFailure(msg) {
	  console.log( "Failed to get MIDI access - " + msg );
	}

	navigator.requestMIDIAccess().then( onMIDISuccess, onMIDIFailure );
	
	</script>
</body>
</html>